<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8">
    <title>Отправка запроса на сервер</title>
  </head>
  <body>
    <h1>Отправка запроса на сервер</h1>
    <form id="requestForm">
      <label for="uidInput">Введите UID заказа:</label><br />
      <input type="text" id="uidInput" /><br /><br />
      <button type="submit">Отправить запрос</button>
    </form>

    <div id="responseArea"></div>

    <script>
      document
        .getElementById("requestForm")
        .addEventListener("submit", async (event) => {
          event.preventDefault()

          const uid = document.getElementById("uidInput").value.trim()

          if (!uid) return alert("Необходимо заполнить UID!")

          try {
            const response = await fetch(
              `http://localhost:7540/order?order_uid=${uid}`,
              {
                method: "OPTIONS",
                headers: {
                  "Content-Type": "text/plain",
                },
              }
            )
            if (!response.ok) {
              throw new Error(
                `Ошибка: ${response.status} - ${response.statusText}`
              )
            }
            const result = await response.text()
            alert(result)
          } catch (error) {
            console.error("Ошибка: ", error)
            alert("Произошла ошибка при отправке данных")
          }
        })
    </script>
  </body>
</html>